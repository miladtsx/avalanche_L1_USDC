"use strict";(self.webpackChunkava_pay=self.webpackChunkava_pay||[]).push([[94052],{94052:(e,a,n)=>{n.d(a,{onSessionProposal:()=>o});var s=n(27197),i=n(21225);async function o(e){const{wallet:a,walletConnectClient:n,event:o,chains:t,onConnect:c}=e,r=a.getAccount();if(!r)throw new Error("No account connected to provided wallet");const p=o.verifyContext?.verified?.origin;p&&await async function(e){let{walletConnectClient:a,origin:n}=e;const o=await(0,i.S5)();for(const i of o)i.origin===n&&await(0,s.EF)({session:i,walletConnectClient:a})}({origin:p,walletConnectClient:n});const l=await async function(e){let{account:a,walletConnectClient:n,sessionProposal:s,chains:i}=e;if(!s.params.requiredNamespaces?.eip155&&!s.params.optionalNamespaces?.eip155)throw new Error("No EIP155 namespace found in Wallet Connect session proposal");const o={chains:[...Array.from(new Set([...s.params.requiredNamespaces?.eip155?.chains?.map((e=>`${e}:${a.address}`))??[],...s.params.optionalNamespaces?.eip155?.chains?.map((e=>`${e}:${a.address}`))??[],...i?.map((e=>`eip155:${e.id}:${a.address}`))??[]]))],methods:[...s.params.requiredNamespaces?.eip155?.methods??[],...s.params.optionalNamespaces?.eip155?.methods??[]],events:[...s.params.requiredNamespaces?.eip155?.events??[],...s.params.optionalNamespaces?.eip155?.events??[]]},t=await n.approve({id:s.id,namespaces:{eip155:{accounts:o.chains,methods:o.methods,events:o.events}}}),c=await t.acknowledged();return{topic:c.topic,origin:s.verifyContext?.verified?.origin||"Unknown origin"}}({account:r,walletConnectClient:n,sessionProposal:o,chains:t});await(0,i.E1)(l),a.subscribe("disconnect",(()=>{(0,s.EF)({session:l,walletConnectClient:n})})),c?.(l)}}}]);
//# sourceMappingURL=94052.ca08a62f.chunk.js.map